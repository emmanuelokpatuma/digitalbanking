# Terraform Infrastructure Architecture - Digital Banking Platform

**Date**: January 31, 2026  
**Project**: charged-thought-485008-q7  
**Region**: us-central1  
**Environment**: Production

---

## High-Level Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        GOOGLE CLOUD PLATFORM                                     â”‚
â”‚                        Project: charged-thought-485008-q7                        â”‚
â”‚                        Region: us-central1                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                     â”‚
                    â”‚   VPC Network: digitalbank-vpc     â”‚
                    â”‚   Auto-create subnets: false       â”‚
                    â”‚                                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                         â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       â”‚  â”‚                    â”‚  â”‚                         â”‚
â”‚ Primary Subnet        â”‚  â”‚ Pods Range         â”‚  â”‚ Services Range          â”‚
â”‚ 10.0.0.0/24          â”‚  â”‚ 10.1.0.0/16       â”‚  â”‚ 10.2.0.0/16            â”‚
â”‚ (256 IPs)            â”‚  â”‚ Secondary Range    â”‚  â”‚ Secondary Range         â”‚
â”‚                       â”‚  â”‚ (65,536 IPs)      â”‚  â”‚ (65,536 IPs)           â”‚
â”‚ â€¢ GKE Nodes          â”‚  â”‚ â€¢ Pod IPs          â”‚  â”‚ â€¢ Service IPs          â”‚
â”‚ â€¢ Cloud SQL Private  â”‚  â”‚                    â”‚  â”‚ â€¢ ClusterIPs           â”‚
â”‚                       â”‚  â”‚                    â”‚  â”‚ â€¢ LoadBalancer IPs     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚  Private IP Google Access: Enabled
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                   â”‚
â”‚                     FIREWALL RULES (Network Security)                            â”‚
â”‚                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Rule 1: digitalbank-vpc-allow-internal                                   â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚
â”‚  â”‚ Source Ranges: 10.0.0.0/24, 10.1.0.0/16, 10.2.0.0/16                   â”‚    â”‚
â”‚  â”‚ Allow: TCP (all ports), UDP (all ports), ICMP                           â”‚    â”‚
â”‚  â”‚ Purpose: Internal cluster communication                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Rule 2: digitalbank-vpc-allow-health-check                               â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚
â”‚  â”‚ Source Ranges: 35.191.0.0/16, 130.211.0.0/22 (Google LB Health Checks) â”‚    â”‚
â”‚  â”‚ Allow: TCP (all ports)                                                   â”‚    â”‚
â”‚  â”‚ Target Tags: gke-node                                                    â”‚    â”‚
â”‚  â”‚ Purpose: Allow GCP load balancer health checks                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLOUD NAT & ROUTER (Outbound Internet)                     â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Cloud Router                   â”‚â”€â”€â”€â”€â”€â”€â”‚  Cloud NAT                     â”‚  â”‚
â”‚  â”‚  Name: digitalbank-vpc-router   â”‚      â”‚  Name: digitalbank-vpc-nat     â”‚  â”‚
â”‚  â”‚  Region: us-central1            â”‚      â”‚  NAT IP: AUTO_ONLY             â”‚  â”‚
â”‚  â”‚                                  â”‚      â”‚  Scope: All Subnetworks        â”‚  â”‚
â”‚  â”‚  Purpose: Routes NAT traffic    â”‚      â”‚  Logging: Errors Only          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  Purpose: Allow private GKE nodes to access internet for updates/pulls        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        GKE CLUSTER (Kubernetes Engine)                         â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Cluster: digitalbank-gke                                                â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  Type: Regional (us-central1)                                           â”‚  â”‚
â”‚  â”‚  Zones: us-central1-a, us-central1-b, us-central1-f                    â”‚  â”‚
â”‚  â”‚  Network: digitalbank-vpc                                                â”‚  â”‚
â”‚  â”‚  Subnetwork: digitalbank-subnet                                          â”‚  â”‚
â”‚  â”‚  Networking Mode: VPC_NATIVE                                             â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚  IP Allocation Policy                                           â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  Cluster (Pods):    10.1.0.0/16  (secondary range: "pods")    â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  Services:          10.2.0.0/16  (secondary range: "services") â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚  Private Cluster Configuration                                  â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  Private Nodes: true                                            â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  Private Endpoint: false (public access to API)                â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  Master CIDR: 172.16.0.0/28 (16 IPs for control plane)        â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚  Master Authorized Networks                                     â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  CIDR: 0.0.0.0/0 (All - for demo/dev)                         â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  Display Name: "All"                                            â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  Features:                                                               â”‚  â”‚
â”‚  â”‚  âœ“ Workload Identity (${project}.svc.id.goog)                           â”‚  â”‚
â”‚  â”‚  âœ“ HTTP Load Balancing                                                  â”‚  â”‚
â”‚  â”‚  âœ“ Horizontal Pod Autoscaling                                           â”‚  â”‚
â”‚  â”‚  âœ“ Network Policy (Calico)                                              â”‚  â”‚
â”‚  â”‚  âœ“ GCP Filestore CSI Driver                                             â”‚  â”‚
â”‚  â”‚  âœ“ Logging: logging.googleapis.com/kubernetes                           â”‚  â”‚
â”‚  â”‚  âœ“ Monitoring: monitoring.googleapis.com/kubernetes                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Node Pool: digitalbank-gke-node-pool                                   â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  Type: Regional (spans all zones)                                       â”‚  â”‚
â”‚  â”‚  Machine Type: e2-standard-2 (2 vCPU, 8 GB RAM)                        â”‚  â”‚
â”‚  â”‚  Disk: 100 GB per node                                                  â”‚  â”‚
â”‚  â”‚  Current Nodes: 9 (3 per zone)                                          â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  Autoscaling:                                                            â”‚  â”‚
â”‚  â”‚    Min: 3 nodes per zone (9 total)                                      â”‚  â”‚
â”‚  â”‚    Max: 10 nodes per zone (30 total)                                    â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  Management:                                                             â”‚  â”‚
â”‚  â”‚    Auto-repair: true                                                     â”‚  â”‚
â”‚  â”‚    Auto-upgrade: true                                                    â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚  â”‚
â”‚  â”‚  â”‚ Zone: -a    â”‚  â”‚ Zone: -b    â”‚  â”‚ Zone: -f    â”‚                     â”‚  â”‚
â”‚  â”‚  â”‚ 3 nodes     â”‚  â”‚ 3 nodes     â”‚  â”‚ 3 nodes     â”‚                     â”‚  â”‚
â”‚  â”‚  â”‚ 56 pods     â”‚  â”‚ 60 pods     â”‚  â”‚ 63 pods     â”‚                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  Total: 9 nodes, 179 running pods                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLOUD SQL DATABASES (Managed PostgreSQL)                   â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  VPC Peering for Private Connection                                    â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  Global Address: private-ip-address                                    â”‚   â”‚
â”‚  â”‚  Purpose: VPC_PEERING                                                   â”‚   â”‚
â”‚  â”‚  Address Type: INTERNAL                                                 â”‚   â”‚
â”‚  â”‚  Prefix Length: /16                                                     â”‚   â”‚
â”‚  â”‚  Network: digitalbank-vpc                                               â”‚   â”‚
â”‚  â”‚  Service: servicenetworking.googleapis.com                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Database 1: Auth DB                                                      â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  Instance Name: digitalbank-auth-db                                      â”‚ â”‚
â”‚  â”‚  Version: POSTGRES_15                                                    â”‚ â”‚
â”‚  â”‚  Tier: db-custom-2-7680 (2 vCPU, 7.5 GB RAM)                           â”‚ â”‚
â”‚  â”‚  Disk: 100 GB SSD (auto-resize enabled)                                 â”‚ â”‚
â”‚  â”‚  Availability: ZONAL                                                     â”‚ â”‚
â”‚  â”‚  Region: us-central1                                                     â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚  Database: authdb                                                        â”‚ â”‚
â”‚  â”‚  User: authuser                                                          â”‚ â”‚
â”‚  â”‚  Password: Random 32 chars (stored in Secret Manager)                   â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚  Features:                                                               â”‚ â”‚
â”‚  â”‚  âœ“ Automated backups (02:00 daily)                                      â”‚ â”‚
â”‚  â”‚  âœ“ Point-in-time recovery (7 days transaction logs)                    â”‚ â”‚
â”‚  â”‚  âœ“ 30-day backup retention                                              â”‚ â”‚
â”‚  â”‚  âœ“ Private VPC connection                                               â”‚ â”‚
â”‚  â”‚  âœ“ Public IP with authorized network (84.69.239.90/32)                 â”‚ â”‚
â”‚  â”‚  âœ“ SSL: Allow encrypted & unencrypted                                   â”‚ â”‚
â”‚  â”‚  âœ“ Max connections: 200                                                 â”‚ â”‚
â”‚  â”‚  âœ“ Query insights enabled                                               â”‚ â”‚
â”‚  â”‚  âœ“ Deletion protection: true                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Database 2: Accounts DB                                                  â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  Instance Name: digitalbank-accounts-db                                  â”‚ â”‚
â”‚  â”‚  Version: POSTGRES_15                                                    â”‚ â”‚
â”‚  â”‚  Tier: db-custom-2-7680 (2 vCPU, 7.5 GB RAM)                           â”‚ â”‚
â”‚  â”‚  Disk: 100 GB SSD (auto-resize enabled)                                 â”‚ â”‚
â”‚  â”‚  Availability: ZONAL                                                     â”‚ â”‚
â”‚  â”‚  Region: us-central1                                                     â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚  Database: accountsdb                                                    â”‚ â”‚
â”‚  â”‚  User: accountsuser                                                      â”‚ â”‚
â”‚  â”‚  Password: Random 32 chars (stored in Secret Manager)                   â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚  Features:                                                               â”‚ â”‚
â”‚  â”‚  âœ“ Automated backups (02:30 daily)                                      â”‚ â”‚
â”‚  â”‚  âœ“ Point-in-time recovery (7 days transaction logs)                    â”‚ â”‚
â”‚  â”‚  âœ“ 30-day backup retention                                              â”‚ â”‚
â”‚  â”‚  âœ“ Private VPC connection                                               â”‚ â”‚
â”‚  â”‚  âœ“ Public IP with authorized network (84.69.239.90/32)                 â”‚ â”‚
â”‚  â”‚  âœ“ SSL: Allow encrypted & unencrypted                                   â”‚ â”‚
â”‚  â”‚  âœ“ Max connections: 200                                                 â”‚ â”‚
â”‚  â”‚  âœ“ Query insights enabled                                               â”‚ â”‚
â”‚  â”‚  âœ“ Deletion protection: true                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Database 3: Transactions DB                                              â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  Instance Name: digitalbank-transactions-db                              â”‚ â”‚
â”‚  â”‚  Version: POSTGRES_15                                                    â”‚ â”‚
â”‚  â”‚  Tier: db-custom-2-7680 (2 vCPU, 7.5 GB RAM)                           â”‚ â”‚
â”‚  â”‚  Disk: 100 GB SSD (auto-resize enabled)                                 â”‚ â”‚
â”‚  â”‚  Availability: ZONAL                                                     â”‚ â”‚
â”‚  â”‚  Region: us-central1                                                     â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚  Database: transactionsdb                                                â”‚ â”‚
â”‚  â”‚  User: transactionsuser                                                  â”‚ â”‚
â”‚  â”‚  Password: Random 32 chars (stored in Secret Manager)                   â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚  Features:                                                               â”‚ â”‚
â”‚  â”‚  âœ“ Automated backups (03:00 daily)                                      â”‚ â”‚
â”‚  â”‚  âœ“ Point-in-time recovery (7 days transaction logs)                    â”‚ â”‚
â”‚  â”‚  âœ“ 30-day backup retention                                              â”‚ â”‚
â”‚  â”‚  âœ“ Private VPC connection                                               â”‚ â”‚
â”‚  â”‚  âœ“ Public IP with authorized network (84.69.239.90/32)                 â”‚ â”‚
â”‚  â”‚  âœ“ SSL: Allow encrypted & unencrypted                                   â”‚ â”‚
â”‚  â”‚  âœ“ Max connections: 200                                                 â”‚ â”‚
â”‚  â”‚  âœ“ Query insights enabled                                               â”‚ â”‚
â”‚  â”‚  âœ“ Deletion protection: true                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SECRET MANAGER (Password Storage)                          â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Secret: auth-db-password                                       â”‚           â”‚
â”‚  â”‚  Replication: Auto (all regions)                                â”‚           â”‚
â”‚  â”‚  Value: Random 32-character password                            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Secret: accounts-db-password                                   â”‚           â”‚
â”‚  â”‚  Replication: Auto (all regions)                                â”‚           â”‚
â”‚  â”‚  Value: Random 32-character password                            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Secret: transactions-db-password                               â”‚           â”‚
â”‚  â”‚  Replication: Auto (all regions)                                â”‚           â”‚
â”‚  â”‚  Value: Random 32-character password                            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed Resource Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          RESOURCE DEPENDENCIES                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

google_compute_network.vpc (digitalbank-vpc)
    â”‚
    â”œâ”€â”€> google_compute_subnetwork.subnet (digitalbank-subnet)
    â”‚       â”‚
    â”‚       â”œâ”€â”€> Primary Range: 10.0.0.0/24
    â”‚       â”œâ”€â”€> Secondary Range "pods": 10.1.0.0/16
    â”‚       â””â”€â”€> Secondary Range "services": 10.2.0.0/16
    â”‚
    â”œâ”€â”€> google_compute_router.router (digitalbank-vpc-router)
    â”‚       â”‚
    â”‚       â””â”€â”€> google_compute_router_nat.nat (digitalbank-vpc-nat)
    â”‚
    â”œâ”€â”€> google_compute_firewall.allow_internal
    â”‚       â”‚
    â”‚       â””â”€â”€> Allows: TCP/UDP/ICMP from internal ranges
    â”‚
    â”œâ”€â”€> google_compute_firewall.allow_health_check
    â”‚       â”‚
    â”‚       â””â”€â”€> Allows: TCP from GCP load balancer ranges
    â”‚
    â”œâ”€â”€> google_compute_global_address.private_ip_address
    â”‚       â”‚
    â”‚       â””â”€â”€> google_service_networking_connection.private_vpc_connection
    â”‚               â”‚
    â”‚               â”œâ”€â”€> google_sql_database_instance.auth_db
    â”‚               â”‚       â”œâ”€â”€> google_sql_database.auth_database
    â”‚               â”‚       â”œâ”€â”€> google_sql_user.auth_user
    â”‚               â”‚       â”‚       â””â”€â”€> random_password.auth_db_password
    â”‚               â”‚       â”‚               â””â”€â”€> google_secret_manager_secret.auth_db_password
    â”‚               â”‚       â”‚                       â””â”€â”€> google_secret_manager_secret_version.auth_db_password
    â”‚               â”‚       â”‚
    â”‚               â”‚       â””â”€â”€> Uses: Private VPC Connection
    â”‚               â”‚
    â”‚               â”œâ”€â”€> google_sql_database_instance.accounts_db
    â”‚               â”‚       â”œâ”€â”€> google_sql_database.accounts_database
    â”‚               â”‚       â”œâ”€â”€> google_sql_user.accounts_user
    â”‚               â”‚       â”‚       â””â”€â”€> random_password.accounts_db_password
    â”‚               â”‚       â”‚               â””â”€â”€> google_secret_manager_secret.accounts_db_password
    â”‚               â”‚       â”‚                       â””â”€â”€> google_secret_manager_secret_version.accounts_db_password
    â”‚               â”‚       â”‚
    â”‚               â”‚       â””â”€â”€> Uses: Private VPC Connection
    â”‚               â”‚
    â”‚               â””â”€â”€> google_sql_database_instance.transactions_db
    â”‚                       â”œâ”€â”€> google_sql_database.transactions_database
    â”‚                       â”œâ”€â”€> google_sql_user.transactions_user
    â”‚                       â”‚       â””â”€â”€> random_password.transactions_db_password
    â”‚                       â”‚               â””â”€â”€> google_secret_manager_secret.transactions_db_password
    â”‚                       â”‚                       â””â”€â”€> google_secret_manager_secret_version.transactions_db_password
    â”‚                       â”‚
    â”‚                       â””â”€â”€> Uses: Private VPC Connection
    â”‚
    â””â”€â”€> google_container_cluster.primary (digitalbank-gke)
            â”‚
            â”œâ”€â”€> Uses: google_compute_network.vpc
            â”œâ”€â”€> Uses: google_compute_subnetwork.subnet
            â”œâ”€â”€> Uses Secondary Ranges: "pods" and "services"
            â”‚
            â””â”€â”€> google_container_node_pool.primary_nodes
                    â”‚
                    â”œâ”€â”€> Machine Type: e2-standard-2
                    â”œâ”€â”€> Nodes: 9 (3 per zone)
                    â”œâ”€â”€> Autoscaling: 3-10 per zone
                    â””â”€â”€> Connected to all 3 databases via private VPC
```

---

## IP Address Allocation Table

| Resource | CIDR / IP Range | Total IPs | Purpose |
|----------|-----------------|-----------|---------|
| **Primary Subnet** | 10.0.0.0/24 | 256 | GKE node IPs, Cloud SQL private IPs |
| **Pods Secondary Range** | 10.1.0.0/16 | 65,536 | Kubernetes pod IP addresses |
| **Services Secondary Range** | 10.2.0.0/16 | 65,536 | Kubernetes service ClusterIP addresses |
| **GKE Master** | 172.16.0.0/28 | 16 | GKE control plane (private) |
| **Private VPC Peering** | Auto-allocated /16 | 65,536 | Cloud SQL instances |

---

## Network Flow Diagram

```
                                 INTERNET
                                     â”‚
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Cloud NAT (Outbound Only)     â”‚
                    â”‚   digitalbank-vpc-nat            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Cloud Router                  â”‚
                    â”‚   digitalbank-vpc-router        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   VPC Network                   â”‚
                    â”‚   digitalbank-vpc               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚                            â”‚
        â”‚                            â”‚                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firewall      â”‚         â”‚   Subnet         â”‚       â”‚  VPC Peering     â”‚
â”‚  Rules         â”‚         â”‚   10.0.0.0/24   â”‚       â”‚  for Cloud SQL   â”‚
â”‚                â”‚         â”‚                  â”‚       â”‚                  â”‚
â”‚ â€¢ allow-       â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   internal     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚ GKE Nodes  â”‚  â”‚       â”‚  â”‚ Auth DB    â”‚  â”‚
â”‚                â”‚         â”‚  â”‚ (9 nodes)  â”‚  â”‚       â”‚  â”‚            â”‚  â”‚
â”‚ â€¢ allow-health â”‚         â”‚  â”‚            â”‚  â”‚       â”‚  â”‚ Private IP â”‚  â”‚
â”‚   check        â”‚         â”‚  â”‚ Private:   â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚            â”‚  â”‚
â”‚                â”‚         â”‚  â”‚ 10.0.0.x   â”‚  â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚            â”‚  â”‚       â”‚                  â”‚
                           â”‚  â”‚ Pods:      â”‚  â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚ 10.1.x.x   â”‚  â”‚       â”‚  â”‚Accounts DB â”‚  â”‚
        â”‚                  â”‚  â”‚            â”‚  â”‚       â”‚  â”‚            â”‚  â”‚
        â”‚  Load Balancers  â”‚  â”‚ Services:  â”‚  â”‚       â”‚  â”‚ Private IP â”‚â—„â”€â”¼â”€â”€â”
        â”‚  (External IPs)  â”‚  â”‚ 10.2.x.x   â”‚  â”‚       â”‚  â”‚            â”‚  â”‚  â”‚
        â”‚                  â”‚  â”‚            â”‚  â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
        â”‚  34.31.22.16 â—„â”€â”€â”€â”¼â”€â”€â”¤            â”‚  â”‚       â”‚                  â”‚  â”‚
        â”‚  136.111.5.250   â”‚  â”‚            â”‚  â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
        â”‚  34.71.18.248    â”‚  â”‚            â”‚  â”‚       â”‚  â”‚Transaction â”‚  â”‚  â”‚
        â”‚  35.188.11.8     â”‚  â”‚            â”‚  â”‚       â”‚  â”‚    DB      â”‚  â”‚  â”‚
        â”‚  34.29.9.149     â”‚  â”‚            â”‚  â”‚       â”‚  â”‚            â”‚  â”‚  â”‚
        â”‚  34.63.246.97    â”‚  â”‚            â”‚  â”‚       â”‚  â”‚ Private IP â”‚â—„â”€â”¼â”€â”€â”˜
        â”‚  34.44.185.11    â”‚  â”‚            â”‚  â”‚       â”‚  â”‚            â”‚  â”‚
        â”‚  34.173.39.60    â”‚  â”‚            â”‚  â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚                  â”‚
                              â”‚                â”‚       â”‚  All DBs connect â”‚
                              â”‚  Secondary:    â”‚       â”‚  via VPC Peering â”‚
                              â”‚  Pods          â”‚       â”‚  (Private IPs)   â”‚
                              â”‚  10.1.0.0/16  â”‚       â”‚                  â”‚
                              â”‚                â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚  Secondary:    â”‚
                              â”‚  Services      â”‚
                              â”‚  10.2.0.0/16  â”‚
                              â”‚                â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Terraform Resource Summary

### Network Resources (6 total)

| Resource Type | Name | Purpose |
|---------------|------|---------|
| `google_compute_network` | vpc | VPC network container |
| `google_compute_subnetwork` | subnet | Primary subnet with secondary ranges |
| `google_compute_router` | router | NAT routing |
| `google_compute_router_nat` | nat | Outbound internet for private nodes |
| `google_compute_firewall` | allow_internal | Internal communication |
| `google_compute_firewall` | allow_health_check | Load balancer health checks |

### GKE Resources (2 total)

| Resource Type | Name | Purpose |
|---------------|------|---------|
| `google_container_cluster` | primary | GKE cluster control plane |
| `google_container_node_pool` | primary_nodes | Worker nodes |

### Database Resources (15 total)

| Resource Type | Name | Purpose |
|---------------|------|---------|
| `google_compute_global_address` | private_ip_address | VPC peering IP range |
| `google_service_networking_connection` | private_vpc_connection | Private connection for Cloud SQL |
| `google_sql_database_instance` | auth_db | PostgreSQL instance for auth |
| `google_sql_database` | auth_database | Database within auth instance |
| `google_sql_user` | auth_user | Database user for auth |
| `google_sql_database_instance` | accounts_db | PostgreSQL instance for accounts |
| `google_sql_database` | accounts_database | Database within accounts instance |
| `google_sql_user` | accounts_user | Database user for accounts |
| `google_sql_database_instance` | transactions_db | PostgreSQL instance for transactions |
| `google_sql_database` | transactions_database | Database within transactions instance |
| `google_sql_user` | transactions_user | Database user for transactions |
| `random_password` | auth_db_password | Generated password |
| `random_password` | accounts_db_password | Generated password |
| `random_password` | transactions_db_password | Generated password |
| (Secret Manager) | 6 secrets + versions | Secure password storage |

**Total Terraform Resources: ~29**

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY LAYERS                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Network Security
â”œâ”€ VPC Isolation (digitalbank-vpc)
â”œâ”€ Private Subnets (no direct internet)
â”œâ”€ Firewall Rules (whitelist only)
â””â”€ Cloud NAT (outbound only, no inbound)

Layer 2: GKE Security
â”œâ”€ Private Nodes (no public IPs)
â”œâ”€ Private Endpoint (optional - currently public for dev)
â”œâ”€ Master Authorized Networks (0.0.0.0/0 - should restrict in prod)
â”œâ”€ Workload Identity (IAM-based pod authentication)
â”œâ”€ Network Policies (Calico)
â””â”€ RBAC (Kubernetes role-based access)

Layer 3: Database Security
â”œâ”€ Private VPC Connection (no public internet route)
â”œâ”€ Public IP with Authorized Network (84.69.239.90/32 only)
â”œâ”€ SSL/TLS Support (encrypted connections)
â”œâ”€ Strong Passwords (32 chars, stored in Secret Manager)
â”œâ”€ Deletion Protection (enabled)
â””â”€ Automated Backups (30-day retention)

Layer 4: Secret Management
â”œâ”€ Google Secret Manager (encrypted at rest)
â”œâ”€ Auto replication (cross-region redundancy)
â”œâ”€ IAM-based access control
â””â”€ No plaintext passwords in code/config

Layer 5: Monitoring & Compliance
â”œâ”€ Cloud Logging (all API calls logged)
â”œâ”€ Cloud Monitoring (resource metrics)
â”œâ”€ Query Insights (database performance)
â”œâ”€ Maintenance Windows (automated patching)
â””â”€ Prometheus + Grafana (application monitoring)
```

---

## High Availability Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HIGH AVAILABILITY DESIGN                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Region: us-central1
â”‚
â”œâ”€ Zone: us-central1-a
â”‚  â”œâ”€ GKE Nodes: 3
â”‚  â”œâ”€ Pods: 56
â”‚  â””â”€ Elasticsearch Master 0
â”‚
â”œâ”€ Zone: us-central1-b
â”‚  â”œâ”€ GKE Nodes: 3
â”‚  â”œâ”€ Pods: 60
â”‚  â”œâ”€ Elasticsearch Master 1
â”‚  â””â”€ Cloud SQL Primary (regional within zone)
â”‚
â””â”€ Zone: us-central1-f
   â”œâ”€ GKE Nodes: 3
   â”œâ”€ Pods: 63
   â””â”€ Elasticsearch Master 2

Features:
âœ“ Multi-zone GKE cluster (survives zone failure)
âœ“ Regional node pool (auto-redistributes on failure)
âœ“ StatefulSets (Elasticsearch) spread across zones
âœ“ Load balancers (auto-failover)
âœ“ Cloud SQL backups (30-day retention, PITR)
âœ“ Auto-repair (unhealthy nodes replaced)
âœ“ Auto-upgrade (managed updates)
```

---

## Cost Breakdown Estimate

| Resource | Qty | Type | Monthly Cost (USD)* |
|----------|-----|------|---------------------|
| **GKE Cluster** | 1 | Control Plane | ~$73 |
| **GKE Nodes** | 9 | e2-standard-2 | ~$250 |
| **Cloud SQL - Auth** | 1 | db-custom-2-7680 | ~$120 |
| **Cloud SQL - Accounts** | 1 | db-custom-2-7680 | ~$120 |
| **Cloud SQL - Transactions** | 1 | db-custom-2-7680 | ~$120 |
| **Cloud NAT** | 1 | NAT Gateway | ~$45 |
| **Load Balancers** | 8 | External LB | ~$150 |
| **Storage** | ~1TB | PD-SSD | ~$170 |
| **Networking** | - | Egress | ~$50 |
| **Logging/Monitoring** | - | Cloud Operations | ~$50 |
| **Secret Manager** | 3 | Secrets | ~$1 |
| | | **TOTAL** | **~$1,149/month** |

*Estimates based on us-central1 pricing, January 2026

---

## Application Data Flow

```
User Request â†’ Internet
     â”‚
     â–¼
External Load Balancer (34.31.22.16)
     â”‚
     â”œâ”€> NGINX Ingress Controller (1 pod)
     â”‚
     â”œâ”€â”€> /api/auth/* â”€â”€> Auth API Pod (10.1.x.x)
     â”‚                      â”‚
     â”‚                      â””â”€â”€> Auth DB (private VPC peering)
     â”‚                            PostgreSQL: authdb
     â”‚
     â”œâ”€â”€> /api/accounts/* â”€â”€> Accounts API Pod (10.1.x.x)
     â”‚                          â”‚
     â”‚                          â””â”€â”€> Accounts DB (private VPC peering)
     â”‚                                PostgreSQL: accountsdb
     â”‚
     â”œâ”€â”€> /api/transactions/* â”€â”€> Transactions API Pod (10.1.x.x)
     â”‚                              â”‚
     â”‚                              â””â”€â”€> Transactions DB (private VPC peering)
     â”‚                                    PostgreSQL: transactionsdb
     â”‚
     â””â”€â”€> / â”€â”€> Frontend Pod (10.1.x.x)
                  â”‚
                  â””â”€â”€> Serves static React app
                        (calls APIs via browser)

Logs collected by:
  - Filebeat (on all nodes) â†’ Elasticsearch â†’ Kibana
  - Fluentbit (GKE) â†’ Cloud Logging

Metrics collected by:
  - Prometheus Node Exporters â†’ Prometheus â†’ Grafana
  - GKE Metrics Agent â†’ Cloud Monitoring
```

---

## Terraform Module Structure

```
terraform/
â”‚
â”œâ”€â”€ main.tf                    # Provider and backend configuration
â”œâ”€â”€ variables.tf               # Input variable definitions
â”œâ”€â”€ outputs.tf                 # Output values
â”œâ”€â”€ terraform.tfvars           # Variable values (gitignored)
â”‚
â”œâ”€â”€ network.tf                 # Network resources
â”‚   â”œâ”€â”€ VPC
â”‚   â”œâ”€â”€ Subnet (with secondary ranges)
â”‚   â”œâ”€â”€ Cloud Router
â”‚   â”œâ”€â”€ Cloud NAT
â”‚   â””â”€â”€ Firewall Rules
â”‚
â”œâ”€â”€ gke.tf                     # Kubernetes resources
â”‚   â”œâ”€â”€ GKE Cluster
â”‚   â””â”€â”€ Node Pool
â”‚
â””â”€â”€ databases.tf               # Database resources
    â”œâ”€â”€ VPC Peering Setup
    â”œâ”€â”€ Cloud SQL Instances (Ã—3)
    â”œâ”€â”€ Databases (Ã—3)
    â”œâ”€â”€ Users (Ã—3)
    â”œâ”€â”€ Passwords (Ã—3)
    â””â”€â”€ Secret Manager (Ã—3)
```

---

## Key Configuration Values

### Network Configuration
```hcl
network_name              = "digitalbank-vpc"
subnet_name               = "digitalbank-subnet"
subnet_cidr               = "10.0.0.0/24"      # 256 IPs
pods_cidr                 = "10.1.0.0/16"      # 65,536 IPs
services_cidr             = "10.2.0.0/16"      # 65,536 IPs
master_ipv4_cidr_block    = "172.16.0.0/28"    # 16 IPs
```

### GKE Configuration
```hcl
cluster_name    = "digitalbank-gke"
region          = "us-central1"
machine_type    = "e2-standard-2"
node_count      = 3                # per zone
min_node_count  = 3                # per zone
max_node_count  = 10               # per zone
disk_size_gb    = 100
```

### Database Configuration
```hcl
database_version = "POSTGRES_15"
database_tier    = "db-custom-2-7680"    # 2 vCPU, 7.5 GB RAM
disk_size        = 100                    # GB SSD
```

---

## Next Steps & Recommendations

### ðŸ”’ Security Improvements
1. **Restrict Master Authorized Networks**
   - Change from `0.0.0.0/0` to specific IPs/VPN range
   
2. **Enable Private Endpoint**
   - Set `enable_private_endpoint = true` for production

3. **Remove Public Database IPs**
   - Use only private VPC connection
   - Remove authorized network for `84.69.239.90/32`

4. **Enable Binary Authorization**
   - Only deploy signed/verified container images

### ðŸ“Š High Availability Improvements
1. **Upgrade Cloud SQL to Regional**
   - Change `availability_type = "REGIONAL"` for automatic failover

2. **Add Read Replicas**
   - Reduce load on primary databases

3. **Implement Multi-region**
   - Deploy to additional region for disaster recovery

### ðŸ’° Cost Optimization
1. **Right-size Nodes**
   - Monitor actual usage and adjust machine types

2. **Use Committed Use Discounts**
   - 1-year or 3-year commitments for 37-57% savings

3. **Implement Autoscaling**
   - Scale down during low-traffic periods

4. **Review Database Tiers**
   - Consider smaller instances for dev/staging

---

**Document Version**: 1.0  
**Last Updated**: January 31, 2026  
**Maintained By**: DevOps Team

For more information:
- [CLUSTER-INVENTORY.md](CLUSTER-INVENTORY.md) - Cluster resource details
- [SERVICE-ACCESS-URLS.md](SERVICE-ACCESS-URLS.md) - Access endpoints
- [UNDERSTANDING-CLUSTER-PODS.md](UNDERSTANDING-CLUSTER-PODS.md) - Pod architecture
